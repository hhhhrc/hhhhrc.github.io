---
layout:     post
title:      "Git提交错分支了怎么办"
subtitle:   "巧用reset"
date: 2018/6/11 21:15:40     
author:     "Hrc"
header-img: "img/git.jpg"
catalog: true
tags:
    - Git
   
---
&emsp;**git的分支管理一直是它能高效管理代码的表现,开发不同的功能时,我们可以创建不同的分支,测试通过后我们再整合到master分支上,大大提高了工作效率.**

**但是实际开发过程中,往往有很多个分支,改完了bug,发现提交错分支了怎么办,**

**别担心,这个问题git肯定替我们想到了,**

**以下命令即可解决**

## 修改了但未提交 ##


### 改完bug忘记切换分支了，代码改了很多怎么办? ###

git add .      (把所有改动暂存)

git stash     (把暂存的文件提交到git的暂存栈)

git checkout 本该提交代码的分支 

git stash pop (将暂存栈中的代码放出来)

之后即可随意操作.


## 代码不但改了,还提交了 ##

相信很多人都是提交了才发现提交错分支了,

我今天就是这样,而且我一开始没有意识到**随着切换分支,本地代码会跟着改变**(白用了这么久的git,现在想想当然是这样啦)

这个时候也不用着急,用以下命令可以**回到你提交错误之前的那个时间点**(这个功能真好啊..)

我是错误地直接提交到了master分支,这个时候

1.git checkout (**不该提交却提交了的分支**)

2.git reset HEAD~1(这个数字代表操作对象是**倒数几个**commit,像我后来又提交了三次,**想回到提交倒数第四次之前,这个数字就是4**.
将这几次提交取消,并放回暂存区)

3.git stash  (把暂存的文件提交到git的暂存栈)

4.git checkout (该提交代码的分支)

5.git stash pop(将代码放出来)

这样,时间就仿佛回到了你犯错误之前的那个时间点,

是不是很神奇.

下面是commit还是继续改就随你了.

----------
下面补充一个git status命令

git status命令用于显示工作目录和暂存区的状态。使用此命令能看到那些修改被暂存到了, 哪些没有, 哪些文件没有被Git tracked到。

使用git status命令有三种结果

### 修改未提交 ###

下面的命令告诉我们，文件被修改过了，但还没有准备提交的修改。

![](https://i.imgur.com/PWqR14U.png)


### add了但还没commit ###
![](https://i.imgur.com/wPqKxxL.png)

下一步可以放心提交了

### commit后 ###

![](https://i.imgur.com/S7mNafH.png)

接下来push就可以了.

----------
2018/6/11 21:14:13 

补充:2018/6/12 10:21:57 

